
# web-socket сервер

Запуск ноды: `$ node index.js`

Запуск демоном: `$ pm2 start index.js`

Логи: `$ pm2 log index`

### Параметры подключения

Для подключения к нашему серверу каждый клиент должен передать следущие параметры:
* userid - обязательно, это может строковый идентификатор анонима или integer ID для авторизованного клиента
* softid - обязательно, идентификатор приложения откдуа подключается клиент

```javascript
client.connect('wss://127.0.0.1:3000/',
    'echo-protocol',
    null,
    {'userid': id, 'softid': softId});
```

### Передача сообщений на сервер

Передача сообщений требует нескольких обязательных параметров:
* module - имя модуля который примет сообщение
* method - имя метода который будет обрабатывать сообщение

Необязательные параметры:
* userId - ID юзера которому направлено сообщение
* text   - Текстовое сообщение

Пример вызова:
```javascript
client.connection.sendUTF(JSON.stringify({
    module: 'notice', 
    userId: 1, 
    method: 'notice', 
    text: 'Уведомление о том что всё работает!'
}));
```

### Модули

Планируется 4 модуля для работы: 
* Модуль администратора - для получения технической информации и управления.
* Уведомления - модуль для отправки уведомлений.
* Приватные сообщения - прямое общение между пользователями.
* Чат - общение пользователей в группах/комнатах с модерацией.
